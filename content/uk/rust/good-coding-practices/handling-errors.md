---
date: 2024-01-26 00:57:43.710179-07:00
description: "\u041E\u0431\u0440\u043E\u0431\u043A\u0430 \u043F\u043E\u043C\u0438\u043B\
  \u043E\u043A \u043F\u043E\u043B\u044F\u0433\u0430\u0454 \u0432 \u0434\u0456\u044F\
  \u0445, \u043A\u043E\u043B\u0438 \u0449\u043E\u0441\u044C \u0456\u0434\u0435 \u043D\
  \u0435 \u0442\u0430\u043A. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u0456\u0441\
  \u0442\u0438 \u0440\u043E\u0431\u043B\u044F\u0442\u044C \u0446\u0435, \u0449\u043E\
  \u0431 \u0432\u043F\u043E\u0440\u0430\u0442\u0438\u0441\u044F \u0437 \u043D\u0435\
  \u0441\u043F\u043E\u0434\u0456\u0432\u0430\u043D\u0438\u043C, \u0437\u0430\u0431\
  \u0435\u0437\u043F\u0435\u0447\u0443\u044E\u0447\u0438 \u0441\u0442\u0456\u0439\u043A\
  \u0456\u0441\u0442\u044C \u0441\u0432\u043E\u0457\u0445 \u043F\u0440\u043E\u0433\
  \u0440\u0430\u043C \u043D\u0430 Rust,\u2026"
lastmod: '2024-02-25T18:49:46.434051-07:00'
model: gpt-4-1106-preview
summary: "\u041E\u0431\u0440\u043E\u0431\u043A\u0430 \u043F\u043E\u043C\u0438\u043B\
  \u043E\u043A \u043F\u043E\u043B\u044F\u0433\u0430\u0454 \u0432 \u0434\u0456\u044F\
  \u0445, \u043A\u043E\u043B\u0438 \u0449\u043E\u0441\u044C \u0456\u0434\u0435 \u043D\
  \u0435 \u0442\u0430\u043A. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u0456\u0441\
  \u0442\u0438 \u0440\u043E\u0431\u043B\u044F\u0442\u044C \u0446\u0435, \u0449\u043E\
  \u0431 \u0432\u043F\u043E\u0440\u0430\u0442\u0438\u0441\u044F \u0437 \u043D\u0435\
  \u0441\u043F\u043E\u0434\u0456\u0432\u0430\u043D\u0438\u043C, \u0437\u0430\u0431\
  \u0435\u0437\u043F\u0435\u0447\u0443\u044E\u0447\u0438 \u0441\u0442\u0456\u0439\u043A\
  \u0456\u0441\u0442\u044C \u0441\u0432\u043E\u0457\u0445 \u043F\u0440\u043E\u0433\
  \u0440\u0430\u043C \u043D\u0430 Rust,\u2026"
title: "\u041E\u0431\u0440\u043E\u0431\u043A\u0430 \u043F\u043E\u043C\u0438\u043B\u043E\
  \u043A"
---

{{< edit_this_page >}}

## Що і чому?

Обробка помилок полягає в діях, коли щось іде не так. Програмісти роблять це, щоб впоратися з несподіваним, забезпечуючи стійкість своїх програм на Rust, щоб вони просто не зупинялися через невеликий збій.

## Як це робити:

Rust обробляє помилки двома основними способами: відновлювані й невідновлювані помилки. Давайте розглянемо обидва.

Відновлювані помилки використовують `Result<T, E>`:

```Rust
use std::fs::File;

fn open_file(filename: &str) -> Result<File, std::io::Error> {
    let f = File::open(filename);
    
    match f {
        Ok(file) => Ok(file),
        Err(e) => Err(e),
    }
}

fn main() {
    match open_file("hello.txt") {
        Ok(_file) => println!("Файл успішно відкритий."),
        Err(_e) => println!("Не вдалося відкрити файл."),
    }
}
```

Результат може бути як "Файл успішно відкритий.", так і "Не вдалося відкрити файл.", залежно від вашого `hello.txt`.

Для невідновлюваних помилок ми використовуємо `panic!`:

```Rust
fn main() {
    // Це викличе паніку програми, оскільки файл, ймовірно, не існує.
    let _f = File::open("nowhere.txt").unwrap();
}
```

Запустіть, і ви побачите повідомлення про паніку. Ваша програма зупиняється на місці.

## Поглиблено

Традиційно обробка помилок у програмуванні була досить хаотичною. Rust робить це правильно, з чітким розмежуванням відновлюваних і невідновлюваних помилок.

Перечислення `Result` використовується для відновлюваних помилок. Воно є явним – ви обробляєте варіанти `Ok` або `Err`. У вас також є методи, як `unwrap()` та `expect()`, але це швидкі та брудні обхідні шляхи, які можуть призвести до `panic!`.

`panic!` – це спосіб Rust кричати про те, що сталася дійсно погана річ, і він не може з цим впоратися. Це як невідновлювана помилка, яка негайно зупиняє виконання. Паніка в Rust часто асоціюється з помилками, з якими ви не очікуєте справлятися, наприклад з виходом за межі масиву.

Обробка помилок шляхом повернення `Result` вважається бажаною, коли ви очікуєте мати справу з помилками. Це ідіоматичний Rust, що означає, що це спосіб, який розробники Rust домовилися робити речі. Існує також `Option<T>` для випадків, коли помилка – це просто щось, що є `None` замість `Some(T)`. Це все про очікування несподіваного без страху.

Альтернативи? Звичайно, ви можете використовувати інші бібліотеки для обробки помилок для більших можливостей або ергономічного використання. Наприклад, `anyhow` для простої обробки помилок або `thiserror` для помилок у коді бібліотеки.

## Дивіться також

Цікавитесь глибшим зануренням? Ось куди можна звернутися:

- [Розділ про обробку помилок у Книзі Rust](https://doc.rust-lang.org/book/ch09-00-error-handling.html) - це чудове місце для розуміння філософії обробки помилок в Rust.
- [Rust прикладами: Обробка помилок](https://doc.rust-lang.org/rust-by-example/error.html) - Інтерактивні приклади для практичного використання.

Пам’ятайте, що хороша обробка помилок – це не лише кодування; це турбота про користувачів вашого коду. Веселого кодування!
