---
date: 2024-01-27 16:21:42.079762-07:00
description: "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F \u0444\
  \u0430\u0439\u043B\u0456\u0432 \u043D\u0430 \u043C\u0456\u0441\u0446\u0456 \u0437\
  \u0430 \u0434\u043E\u043F\u043E\u043C\u043E\u0433\u043E\u044E \u043E\u0434\u043D\
  \u043E\u0440\u044F\u0434\u043A\u043E\u0432\u0438\u0445 \u043A\u043E\u043C\u0430\u043D\
  \u0434 CLI (\u0406\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043A\u043E\u043C\
  \u0430\u043D\u0434\u043D\u043E\u0433\u043E \u0440\u044F\u0434\u043A\u0430) \u0432\
  \ Ruby \u0434\u043E\u0437\u0432\u043E\u043B\u044F\u0454 \u0432\u0430\u043C \u0437\
  \u043C\u0456\u043D\u044E\u0432\u0430\u0442\u0438 \u0444\u0430\u0439\u043B\u0438\
  \ \u0431\u0435\u0437\u043F\u043E\u0441\u0435\u0440\u0435\u0434\u043D\u044C\u043E\
  \ \u0437 \u0432\u0430\u0448\u043E\u0433\u043E\u2026"
lastmod: '2024-03-13T22:44:50.221111-06:00'
model: gpt-4-0125-preview
summary: "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F \u0444\
  \u0430\u0439\u043B\u0456\u0432 \u043D\u0430 \u043C\u0456\u0441\u0446\u0456 \u0437\
  \u0430 \u0434\u043E\u043F\u043E\u043C\u043E\u0433\u043E\u044E \u043E\u0434\u043D\
  \u043E\u0440\u044F\u0434\u043A\u043E\u0432\u0438\u0445 \u043A\u043E\u043C\u0430\u043D\
  \u0434 CLI (\u0406\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043A\u043E\u043C\
  \u0430\u043D\u0434\u043D\u043E\u0433\u043E \u0440\u044F\u0434\u043A\u0430) \u0432\
  \ Ruby \u0434\u043E\u0437\u0432\u043E\u043B\u044F\u0454 \u0432\u0430\u043C \u0437\
  \u043C\u0456\u043D\u044E\u0432\u0430\u0442\u0438 \u0444\u0430\u0439\u043B\u0438\
  \ \u0431\u0435\u0437\u043F\u043E\u0441\u0435\u0440\u0435\u0434\u043D\u044C\u043E\
  \ \u0437 \u0432\u0430\u0448\u043E\u0433\u043E \u0442\u0435\u0440\u043C\u0456\u043D\
  \u0430\u043B\u0443, \u0431\u0435\u0437 \u043D\u0435\u043E\u0431\u0445\u0456\u0434\
  \u043D\u043E\u0441\u0442\u0456 \u0432\u0456\u0434\u043A\u0440\u0438\u0432\u0430\u0442\
  \u0438 \u0457\u0445 \u0443 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440\u0456\
  , \u0432\u043D\u043E\u0441\u0438\u0442\u0438 \u0437\u043C\u0456\u043D\u0438 \u0442\
  \u0430 \u0437\u0431\u0435\u0440\u0456\u0433\u0430\u0442\u0438 \u043D\u0430\u0437\
  \u0430\u0434."
title: "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F \u0444\u0430\
  \u0439\u043B\u0456\u0432 \u0431\u0435\u0437\u043F\u043E\u0441\u0435\u0440\u0435\u0434\
  \u043D\u044C\u043E \u0437\u0430 \u0434\u043E\u043F\u043E\u043C\u043E\u0433\u043E\
  \u044E \u043A\u043E\u043C\u0430\u043D\u0434\u043D\u043E\u0433\u043E \u0440\u044F\
  \u0434\u043A\u0430 \u043E\u0434\u043D\u0438\u043C \u0440\u044F\u0434\u043A\u043E\
  \u043C"
weight: 32
---

## Що та Чому?

Редагування файлів на місці за допомогою однорядкових команд CLI (Інтерфейс командного рядка) в Ruby дозволяє вам змінювати файли безпосередньо з вашого терміналу, без необхідності відкривати їх у редакторі, вносити зміни та зберігати назад. Ця техніка неймовірно корисна для швидких модифікацій, пакетних оновлень або автоматизації повторюваних завдань, економлячи час та зусилля.

## Як це робити:

Ruby надає простий спосіб редагувати файли на місці прямо з командного рядка. Використовуючи перемикач `-i` в Ruby, ви можете наказати Ruby працювати безпосередньо з наданими файлами. Давайте розглянемо кілька прикладів, щоб побачити, як це працює у реальному житті. Уявіть, що у вас є файл `greetings.txt` з наступним вмістом:

```
Привіт, світ!
Привіт, Ruby!
Привіт, програмування!
```

І ви хочете замінити слово "Привіт" на "Привітання". Ось як це можна зробити:

```Ruby
ruby -i -pe "gsub(/Привіт/, 'Привітання')" greetings.txt
```

Після виконання цієї команди `greetings.txt` буде оновлено до:

```
Привітання, світ!
Привітання, Ruby!
Привітання, програмування!
```

Якщо вас турбує потенційне пошкодження даних, Ruby покриває вас. Надаючи розширення до перемикача `-i`, Ruby створює резервну копію перед виконанням змін. Наприклад:

```Ruby
ruby -i.bak -pe "gsub(/Привіт/, 'Бувай')" greetings.txt
```

Тепер, поряд з вашим відредагованим `greetings.txt`, ви знайдете `greetings.txt.bak` у тій же директорії, який містить оригінальний вміст.

## Поглиблений аналіз

Магія редагування файлів на місці в Ruby випливає з його поєднання можливостей обробки тексту подібних до Perl і власної синтаксичної елегантності Ruby. Історично, Perl був мовою вибору для швидкого скриптування в один рядок, особливо для маніпуляцій з текстом. Ruby взяв цей парадигму, дозволяючи потужні можливості скриптування командного рядка.

Альтернативи редагуванню файлів на місці існують і в інших мовах, таких як сам Perl і sed, редактор потоків в системах Unix. Кожна має свої сильні сторони - Perl відомий своїми можливостями обробки тексту, тоді як sed неперевершений у своїй простоті для завдань редагування потоків. Однак, Ruby пропонує баланс, забезпечуючи міцну обробку тексту з більш зрозумілим і дружелюбним до користувача синтаксисом, особливо для тих, хто вже знайомий з Ruby.

На фронті реалізації, редагування файлів на місці в Ruby працює шляхом перейменування оригінального файлу, створення нового з оригінальним іменем файлу і потім запису змін в цей новий файл, поки він читає з перейменованого оригіналу. Цей підхід забезпечує атомарність операції; або весь файл обробляється успішно, або зміни не вносяться, захищаючи цілість ваших даних під час редагування. Цей механізм, у поєднанні з обробкою винятків Ruby, також надає стійкість проти переривань, таких як відключення живлення або завершення процесів, гарантуючи, що принаймні резервна копія залишиться недоторканною.

У підсумку, редагування файлів на місці в Ruby є свідченням його корисності як мови скриптування, пропонуючи суміш потужності, простоти та елегантності для завдань маніпуляції з текстом безпосередньо з командного рядка.
