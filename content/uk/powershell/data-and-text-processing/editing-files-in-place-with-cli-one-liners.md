---
date: 2024-01-27 16:21:19.466656-07:00
description: "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F \u0444\
  \u0430\u0439\u043B\u0456\u0432 \u043D\u0430 \u043C\u0456\u0441\u0446\u0456 \u0437\
  \u0430 \u0434\u043E\u043F\u043E\u043C\u043E\u0433\u043E\u044E \u043E\u0434\u043D\
  \u043E\u0440\u044F\u0434\u043A\u043E\u0432\u0438\u0445 \u043A\u043E\u043C\u0430\u043D\
  \u0434 CLI \u0432 PowerShell \u043F\u043E\u043B\u044F\u0433\u0430\u0454 \u0432 \u0437\
  \u0434\u0456\u0439\u0441\u043D\u0435\u043D\u043D\u0456 \u043F\u0440\u044F\u043C\u0438\
  \u0445 \u0437\u043C\u0456\u043D \u0443 \u0444\u0430\u0439\u043B\u0430\u0445 \u0437\
  \ \u043A\u043E\u043C\u0430\u043D\u0434\u043D\u043E\u0433\u043E \u0440\u044F\u0434\
  \u043A\u0430, \u0431\u0435\u0437\u2026"
lastmod: '2024-03-11T00:14:23.512684-06:00'
model: gpt-4-0125-preview
summary: "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F \u0444\
  \u0430\u0439\u043B\u0456\u0432 \u043D\u0430 \u043C\u0456\u0441\u0446\u0456 \u0437\
  \u0430 \u0434\u043E\u043F\u043E\u043C\u043E\u0433\u043E\u044E \u043E\u0434\u043D\
  \u043E\u0440\u044F\u0434\u043A\u043E\u0432\u0438\u0445 \u043A\u043E\u043C\u0430\u043D\
  \u0434 CLI \u0432 PowerShell \u043F\u043E\u043B\u044F\u0433\u0430\u0454 \u0432 \u0437\
  \u0434\u0456\u0439\u0441\u043D\u0435\u043D\u043D\u0456 \u043F\u0440\u044F\u043C\u0438\
  \u0445 \u0437\u043C\u0456\u043D \u0443 \u0444\u0430\u0439\u043B\u0430\u0445 \u0437\
  \ \u043A\u043E\u043C\u0430\u043D\u0434\u043D\u043E\u0433\u043E \u0440\u044F\u0434\
  \u043A\u0430, \u0431\u0435\u0437\u2026"
title: "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F \u0444\u0430\
  \u0439\u043B\u0456\u0432 \u0431\u0435\u0437\u043F\u043E\u0441\u0435\u0440\u0435\u0434\
  \u043D\u044C\u043E \u0437\u0430 \u0434\u043E\u043F\u043E\u043C\u043E\u0433\u043E\
  \u044E \u043A\u043E\u043C\u0430\u043D\u0434\u043D\u043E\u0433\u043E \u0440\u044F\
  \u0434\u043A\u0430 \u043E\u0434\u043D\u0438\u043C \u0440\u044F\u0434\u043A\u043E\
  \u043C"
---

{{< edit_this_page >}}

## Що і Чому?

Редагування файлів на місці за допомогою однорядкових команд CLI в PowerShell полягає в здійсненні прямих змін у файлах з командного рядка, без необхідності відкривати їх у редакторі. Такий підхід дозволяє заощадити час і може бути особливо зручним для пакетної обробки чи автоматизації повторюваних завдань редагування в множині файлів.

## Як це зробити:

### Заміна тексту в одному файлі

Почнемо з простого завдання: ви хочете замінити всі випадки "oldtext" на "newtext" у файлі під назвою example.txt. Ось як ви могли б це зробити:

```PowerShell
(Get-Content example.txt) -replace 'oldtext', 'newtext' | Set-Content example.txt
```

Цей однорядковий код читає зміст, виконує заміну і записує зміст назад у вихідний файл.

### Редагування декількох файлів

А що, якщо вам потрібно застосувати ту саму зміну до декількох файлів? Ось підхід, що використовує цикл:

```PowerShell
Get-ChildItem *.txt | ForEach-Object {
  (Get-Content $_) -replace 'oldtext', 'newtext' | Set-Content $_
}
```

Цей уривок коду знаходить усі `.txt` файли у поточній директорії, замінюючи "oldtext" на "newtext" у кожному з них.

### Додавання змісту на початку або в кінці файлів

Доповнення або додавання змісту на початку також можна автоматизувати:

```PowerShell
# Додавання на початку
"New first line`n" + (Get-Content example.txt) | Set-Content example.txt

# Додавання в кінці
(Get-Content example.txt) + "`nNew last line" | Set-Content example.txt
```

Тут ми просто конкатенуємо новий зміст перед існуючим або після нього та зберігаємо його назад.

## Поглиблений Розгляд

Історично, редагування на місці більш тісно асоціюється з інструментами Unix, такими як `sed` і `awk`. Оскільки PowerShell є відносно новим інструментом, він не включає спеціалізовану функцію редагування на місці "з коробки". Це частково викликано його філософією дизайну, яка підкреслює важливість об'єктів над потоками тексту, на відміну від інструментів Unix, що обробляють більшість входів як текст.

Альтернативи PowerShell для цього завдання включають використання традиційних інструментів Unix, доступних на Windows через Cygwin або Підсистему Windows для Linux (WSL). Ці інструменти часто надають більш лаконічний синтаксис для редагування на місці через їх орієнтування на текст.

З точки зору реалізації, важливо зазначити, що підхід PowerShell полягає у читанні цілого файлу в пам'ять, внесенні змін і потім запису його назад. Хоча це добре працює для помірно великих файлів, це може стати неефективним для дуже великих файлів. У таких випадках слід розглянути можливість прямого використання методів `.NET` або звернутися до альтернативних інструментів, розроблених для потокової обробки великих обсягів даних.

Незважаючи на ці розгляди, гнучкість та широкий набір функцій PowerShell роблять його незамінним інструментом для прямого маніпулювання файлами з командного рядка, особливо для тих, хто вже закорінений у екосистемі Windows або керує крос-платформними середовищами.
