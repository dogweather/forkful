---
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:59:42.238838-07:00
description: "\u041B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\
  \u043E \u0441\u0443\u0442\u0438 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F\
  \ \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u043D\u044B\u043C \u044D\u043A\
  \u0432\u0438\u0432\u0430\u043B\u0435\u043D\u0442\u043E\u043C \u0441\u0443\u0434\u043E\
  \u0432\u043E\u0433\u043E \u0436\u0443\u0440\u043D\u0430\u043B\u0430; \u044D\u0442\
  \u043E \u0441\u043F\u043E\u0441\u043E\u0431 \u0437\u0430\u043F\u0438\u0441\u0438\
  \ \u0441\u043E\u0431\u044B\u0442\u0438\u0439, \u043F\u0440\u043E\u0438\u0441\u0445\
  \u043E\u0434\u044F\u0449\u0438\u0445 \u0432\u043E \u0432\u0440\u0435\u043C\u044F\
  \ \u0440\u0430\u0431\u043E\u0442\u044B \u043F\u0440\u0438\u043B\u043E\u0436\u0435\
  \u043D\u0438\u044F. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\
  \u0442\u044B\u2026"
lastmod: '2024-03-13T22:44:44.361975-06:00'
model: gpt-4-0125-preview
summary: "\u041B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\
  \u043E \u0441\u0443\u0442\u0438 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F\
  \ \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u043D\u044B\u043C \u044D\u043A\
  \u0432\u0438\u0432\u0430\u043B\u0435\u043D\u0442\u043E\u043C \u0441\u0443\u0434\u043E\
  \u0432\u043E\u0433\u043E \u0436\u0443\u0440\u043D\u0430\u043B\u0430; \u044D\u0442\
  \u043E \u0441\u043F\u043E\u0441\u043E\u0431 \u0437\u0430\u043F\u0438\u0441\u0438\
  \ \u0441\u043E\u0431\u044B\u0442\u0438\u0439, \u043F\u0440\u043E\u0438\u0441\u0445\
  \u043E\u0434\u044F\u0449\u0438\u0445 \u0432\u043E \u0432\u0440\u0435\u043C\u044F\
  \ \u0440\u0430\u0431\u043E\u0442\u044B \u043F\u0440\u0438\u043B\u043E\u0436\u0435\
  \u043D\u0438\u044F. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\
  \u0442\u044B\u2026"
title: "\u0416\u0443\u0440\u043D\u0430\u043B\u0438\u0440\u043E\u0432\u0430\u043D\u0438\
  \u0435"
weight: 17
---

## Что и Почему?
Логирование по сути является программным эквивалентом судового журнала; это способ записи событий, происходящих во время работы приложения. Программисты делают это для отслеживания этих событий для отладки, создания аудиторских трасс или для получения представлений о поведении системы в производственной среде.

## Как:
Clojure опирается на средства логирования Java, но вы можете использовать их более идиоматичным для Clojure способом. Давайте посмотрим, как вы можете использовать `clojure.tools.logging`, который предоставляет простую абстракцию над несколькими фреймворками логирования:

Сначала добавьте зависимость для `clojure.tools.logging` и реализацию логирования, такую как `log4j`, в ваш `project.clj`:

```clojure
:dependencies [[org.clojure/clojure "1.10.3"]
               [org.clojure/tools.logging "1.1.0"]
               [log4j/log4j "1.2.17"]]
```

Теперь давайте залогируем некоторые сообщения:

```clojure
(require '[clojure.tools.logging :as log])

(defn compute-answer-to-everything []
  (log/debug "Начало интенсивных вычислений...")
  (Thread/sleep 3000) ; Имитируем длительные вычисления
  (log/info "Вычисления завершены. Ответ - 42.")
  42)

(compute-answer-to-everything)
```
По умолчанию в выводе не будут показаны сообщения `DEBUG`, так как уровни логирования обычно устанавливаются в `INFO`:

```
INFO  [ваше-пространство-имен] - Вычисления завершены. Ответ - 42.
```

Вы можете настроить уровни логирования и аппендеры в файле `log4j.properties`, чтобы получить более подробный вывод при необходимости.

## Глубокое погружение
`clojure.tools.logging` существует уже довольно давно и служит мостом между кодом Clojure и миром логирования Java. Исторически Java прошла через несколько итераций и библиотек для логирования, таких как встроенный API логирования Java, `log4j`, `slf4j` и `logback`.

В Clojure, хотя вы можете напрямую использовать фреймворки логирования Java, `clojure.tools.logging` обнаруживает и делегирует выполнение любому фреймворку логирования, который найдет в вашем classpath, избавляя вас от тесной связи с конкретной реализацией. Это может помочь сохранить ваш код Clojure более портативным и модульным.

Альтернативы `clojure.tools.logging` в экосистеме Clojure включают библиотеки вроде `timbre`, которая является чистой Clojure библиотекой логирования с возможностями вроде ротации логов, фильтрации и асинхронного логирования "из коробки".

Детали реализации крайне важны, когда речь идет о логировании в многопоточной среде, такой как Clojure. Здесь неизменяемость и управление побочными эффектами предоставляют явные преимущества. Логирование, как побочный эффект, должно обрабатываться осторожно, чтобы избежать узких мест производительности и обеспечить безопасность потоков, что большинство фреймворков логирования Java уже обеспечивают.

Наконец, рассмотрите структурированное логирование, где логи записываются в виде структурированных данных (например, JSON). Это может быть чрезвычайно полезным для последующего анализа и обработки, особенно при работе с крупномасштабными распределенными системами.

## Смотрите также
Если вы хотите узнать больше, рассмотрите возможность ознакомления с этими ресурсами:

- Документация Clojure Tools Logging: https://github.com/clojure/tools.logging
- Timbre, библиотека логирования для Clojure: https://github.com/ptaoussanis/timbre
- Настройка Log4J в Clojure: http://clojure-doc.org/articles/tutorials/logging_with_log4j.html
- Руководство по Logback для продвинутых настроек: http://logback.qos.ch/manual/
- Руководство по структурированному логированию в Clojure: https://corfield.org/blog/2020/04/28/structured-logging/
