---
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:00:51.160251-07:00
description: "\u0427\u0442\u0435\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u043E\
  \u0432\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u043E\u0437\u043D\u0430\
  \u0447\u0430\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0443 \u0435\
  \u0433\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E\
  \ \u0432 \u0432\u0430\u0448\u0443 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\
  \u0443. \u041C\u044B \u0434\u0435\u043B\u0430\u0435\u043C \u044D\u0442\u043E \u0434\
  \u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438, \u0430\u043D\
  \u0430\u043B\u0438\u0437\u0430 \u0438\u043B\u0438 \u043E\u0442\u043E\u0431\u0440\
  \u0430\u0436\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\
  \u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445, \u0442\u0430\u043A\u0438\
  \u0445\u2026"
lastmod: '2024-03-11T00:14:18.946327-06:00'
model: gpt-4-0125-preview
summary: "\u0427\u0442\u0435\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u043E\
  \u0432\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u043E\u0437\u043D\u0430\
  \u0447\u0430\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0443 \u0435\
  \u0433\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E\
  \ \u0432 \u0432\u0430\u0448\u0443 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\
  \u0443. \u041C\u044B \u0434\u0435\u043B\u0430\u0435\u043C \u044D\u0442\u043E \u0434\
  \u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438, \u0430\u043D\
  \u0430\u043B\u0438\u0437\u0430 \u0438\u043B\u0438 \u043E\u0442\u043E\u0431\u0440\
  \u0430\u0436\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\
  \u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445, \u0442\u0430\u043A\u0438\
  \u0445\u2026"
title: "\u0427\u0442\u0435\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u043E\u0432\
  \u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430"
---

{{< edit_this_page >}}

## Что и Почему?

Чтение текстового файла означает загрузку его содержимого в вашу программу. Мы делаем это для обработки, анализа или отображения сохраненных данных, таких как настройки, журналы или пользовательский ввод.

## Как:

Давайте посмотрим, как читать текстовый файл построчно, а затем целиком.

```Lua
-- Чтение файла построчно
local file = io.open("example.txt", "r") -- Открыть файл для чтения
if file then
  for line in file:lines() do -- Итерирование по каждой строке в файле
    print(line)
  end
  file:close() -- Всегда закрывайте файл, когда закончите
else
  print("Не могу открыть файл.")
end

-- Чтение всего файла за один раз
local file = io.open("example.txt", "r") -- Открыть файл для чтения
if file then
  local content = file:read("*a") -- Прочитать весь контент
  print(content)
  file:close() -- Закрыть файл
else
  print("Не могу открыть файл.")
end
```

Пример вывода для обоих фрагментов, если `example.txt` содержит:
```
Привет, Lua!
```

Вывод будет:
```
Привет, Lua!
```

## Погружение в тему

Исторически чтение файлов является фундаментальной операцией, уходящей корнями к первым компьютерам. В Lua это обрабатывается через простую модель ввода-вывода с библиотекой `io`.

Хотя `io.lines` и `io.read` являются общепринятыми способами доступа к содержимому файла, существуют альтернативы, такие как `lfs` (LuaFileSystem) для продвинутых операций с файлами.

При чтении Lua обрабатывает буферизацию за кулисами, но для больших файлов следует читать частями, чтобы избежать высокого использования памяти.

Использование библиотеки `io` просто, но всегда помните о необходимости закрывать файлы, чтобы предотвратить утечки ресурсов. При ошибке операции с файлами Lua возвращают `nil` и сообщение об ошибке, с которыми следует обращаться для надежности.

## Смотрите также:

- [Справочное руководство Lua 5.4: Ввод-Вывод](https://www.lua.org/manual/5.4/manual.html#6.8)
- [Изучите Lua](https://learnxinyminutes.com/docs/lua/)
