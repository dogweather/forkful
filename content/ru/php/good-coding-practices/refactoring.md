---
changelog:
- 2024-01-29, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:01:24.486279-07:00
description: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 -\
  \ \u044D\u0442\u043E \u043F\u0440\u043E\u0446\u0435\u0441\u0441 \u043F\u0435\u0440\
  \u0435\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0443\u0449\u0435\u0441\u0442\
  \u0432\u0443\u044E\u0449\u0435\u0433\u043E \u043A\u043E\u043C\u043F\u044C\u044E\u0442\
  \u0435\u0440\u043D\u043E\u0433\u043E \u043A\u043E\u0434\u0430 \u0431\u0435\u0437\
  \ \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0435\u0433\u043E \u0432\
  \u043D\u0435\u0448\u043D\u0435\u0433\u043E \u043F\u043E\u0432\u0435\u0434\u0435\u043D\
  \u0438\u044F. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\
  \u044B \u043E\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043B\u044F\u044E\u0442\
  \ \u0440\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 \u0434\u043B\
  \u044F\u2026"
lastmod: '2024-02-25T18:49:42.896941-07:00'
model: gpt-4-0125-preview
summary: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 - \u044D\
  \u0442\u043E \u043F\u0440\u043E\u0446\u0435\u0441\u0441 \u043F\u0435\u0440\u0435\
  \u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\
  \u0443\u044E\u0449\u0435\u0433\u043E \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\
  \u0440\u043D\u043E\u0433\u043E \u043A\u043E\u0434\u0430 \u0431\u0435\u0437 \u0438\
  \u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0435\u0433\u043E \u0432\u043D\
  \u0435\u0448\u043D\u0435\u0433\u043E \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\
  \u044F. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\u044B\
  \ \u043E\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043B\u044F\u044E\u0442 \u0440\
  \u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 \u0434\u043B\u044F\u2026"
title: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433"
---

{{< edit_this_page >}}

## Что и почему?

Рефакторинг - это процесс перестройки существующего компьютерного кода без изменения его внешнего поведения. Программисты осуществляют рефакторинг для улучшения нефункциональных атрибутов программного обеспечения, делая код более чистым, эффективным и легким в обслуживании.

## Как это делается:

Давайте возьмем классический фрагмент PHP-кода и применим к нему немного магии рефакторинга.

До рефакторинга наш код может выглядеть так:

```php
function printOrderDetails($order) {
    foreach ($order as $item) {
        echo "Item: " . $item['name'];
        echo " - Price: " . $item['price'];
        echo "<br>";
    }
    
    if (!empty($order)) {
        echo "Total: " . array_sum(array_column($order, 'price'));
    }
}
```

Но мы можем рефакторить этот код, чтобы улучшить его ясность и модульность:

```php
function printItem($item) {
    echo "Item: {$item['name']} - Price: {$item['price']}<br>";
}

function calculateTotal($order) {
    return array_sum(array_column($order, 'price'));
}

function printOrderDetails(array $order) {
    array_walk($order, 'printItem');

    if (!empty($order)) {
        echo "Total: " . calculateTotal($order);
    }
}
```
Разбивая функцию `printOrderDetails` на меньшие функции, наш код становится более читаемым и проще для отладки.

## Глубокое погружение

Рефакторинг берет свои корни из сообщества программистов на Smalltalk в начале 1990-х годов и был дополнительно популяризирован семинарной книгой Мартина Фаулера "Рефакторинг: Улучшение дизайна существующего кода" (1999). Хотя рефакторинг может быть применен к любому языку программирования, динамичная природа PHP предоставляет некоторые уникальные вызовы и возможности.

Альтернативами рефакторингу могут быть полная перезапись кода с нуля, что зачастую более рискованно и занимает больше времени. В экосистеме PHP инструменты, такие как PHPStan и Rector, могут автоматически выявлять и выполнять некоторые операции рефакторинга соответственно. С точки зрения реализации, ключевыми практиками для обеспечения успешного рефакторинга без внесения ошибок являются проведение небольших рефакторингов и тщательное тестирование с помощью модульных тестов.

## См. также

- Книга Мартина Фаулера по рефакторингу: https://martinfowler.com/books/refactoring.html
- PHPStan, инструмент статического анализа PHP: https://phpstan.org/
- Rector, инструмент для автоматического рефакторинга кода PHP: https://getrector.org/
- Модульное тестирование в PHP с PHPUnit: https://phpunit.de/
