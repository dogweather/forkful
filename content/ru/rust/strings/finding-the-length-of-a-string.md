---
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:57:54.251387-07:00
description: "\u041D\u0430\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u043B\
  \u0438\u043D\u044B \u0441\u0442\u0440\u043E\u043A\u0438 \u043E\u0437\u043D\u0430\
  \u0447\u0430\u0435\u0442 \u043F\u043E\u0434\u0441\u0447\u0435\u0442 \u043A\u043E\
  \u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0441\u0438\u043C\u0432\u043E\u043B\
  \u043E\u0432, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043E\u043D\u0430 \u0441\
  \u043E\u0434\u0435\u0440\u0436\u0438\u0442. \u041F\u0440\u043E\u0433\u0440\u0430\
  \u043C\u043C\u0438\u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\
  \u0442\u043E \u0434\u043B\u044F \u0442\u043E\u0433\u043E, \u0447\u0442\u043E\u0431\
  \u044B \u044D\u0444\u0444\u0435\u043A\u0442\u0438\u0432\u043D\u043E \u043F\u0440\
  \u043E\u0432\u0435\u0440\u044F\u0442\u044C,\u2026"
lastmod: '2024-03-11T00:14:18.251977-06:00'
model: gpt-4-0125-preview
summary: "\u041D\u0430\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u043B\
  \u0438\u043D\u044B \u0441\u0442\u0440\u043E\u043A\u0438 \u043E\u0437\u043D\u0430\
  \u0447\u0430\u0435\u0442 \u043F\u043E\u0434\u0441\u0447\u0435\u0442 \u043A\u043E\
  \u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0441\u0438\u043C\u0432\u043E\u043B\
  \u043E\u0432, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043E\u043D\u0430 \u0441\
  \u043E\u0434\u0435\u0440\u0436\u0438\u0442. \u041F\u0440\u043E\u0433\u0440\u0430\
  \u043C\u043C\u0438\u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\
  \u0442\u043E \u0434\u043B\u044F \u0442\u043E\u0433\u043E, \u0447\u0442\u043E\u0431\
  \u044B \u044D\u0444\u0444\u0435\u043A\u0442\u0438\u0432\u043D\u043E \u043F\u0440\
  \u043E\u0432\u0435\u0440\u044F\u0442\u044C,\u2026"
title: "\u041F\u043E\u0438\u0441\u043A \u0434\u043B\u0438\u043D\u044B \u0441\u0442\
  \u0440\u043E\u043A\u0438"
---

{{< edit_this_page >}}

## Что и Почему?
Нахождение длины строки означает подсчет количества символов, которые она содержит. Программисты делают это для того, чтобы эффективно проверять, форматировать или обрабатывать текстовые данные.

## Как это сделать:
Rust предлагает использовать `len()` для прямой оценки длины:

```Rust
fn main() {
    let greeting = "Привет, мир!";
    println!("Длина: {}", greeting.len());
}
```

Вывод: `Длина: 13`

Однако, будьте осторожны, `len()` считает байты, а не символы. Для подсчета символов используйте `.chars().count()`:

```Rust
fn main() {
    let greeting = "¡Hola, mundo!";
    println!("Количество символов: {}", greeting.chars().count());
}
```

Вывод: `Количество символов: 12`

## Подробнее
`len()` считает байты, потому что строки в Rust кодируются в UTF-8. Исторически, первые компьютеры использовали ASCII, представляя каждый символ одним байтом. Однако UTF-8 поддерживает огромное количество символов, используя от 1 до 4 байт на каждый.

Когда вы вызываете `len()`, Rust считает байты в строке, что быстро, но не всегда соответствует количеству символов. Например, эмодзи или определенные символы с акцентами занимают более одного байта. Вот почему важно использование `.chars().count()` — оно итерирует по символам и возвращает количество скалярных значений Unicode, что и является количеством символов, которое большинство людей ожидает.

Что касается альтернатив, `.chars().count()` точно, но медленно для длинных строк, поскольку ему необходимо итерировать каждый символ. Если производительность критична, и вы уверены, что работаете с ASCII или с символами Unicode фиксированной ширины, `len()` более эффективен.

Наконец, помните, что индексация строк в Rust не позволяет прямого доступа по позиции символа из-за того, как работает кодировка UTF-8. Rust предотвращает операции, которые могли бы случайно нарушить или разделить строки в неправильных местах, которые могли бы не представлять полные символы.

## См. также
- Официальная документация по строкам Rust: [https://doc.rust-lang.org/std/string/](https://doc.rust-lang.org/std/string/)
- Книга Rust о строках: [https://doc.rust-lang.org/book/ch08-02-strings.html](https://doc.rust-lang.org/book/ch08-02-strings.html)
- Чтобы узнать больше о различиях между UTF-8 и ASCII, посетите [https://tools.ietf.org/html/rfc3629](https://tools.ietf.org/html/rfc3629)
