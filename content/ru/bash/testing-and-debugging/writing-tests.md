---
title:                "Написание тестов"
aliases: - /ru/bash/writing-tests.md
date:                  2024-01-29T00:06:18.761692-07:00
model:                 gpt-4-0125-preview
simple_title:         "Написание тестов"

tag:                  "Testing and Debugging"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/bash/writing-tests.md"
changelog:
  - 2024-01-29, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и Почему?

Написание тестов подтверждает, что код работает как ожидается. Программисты тестируют, чтобы заранее выявлять ошибки, обеспечивать надежность и безопасно проводить обновления.

## Как:

Bash не имеет встроенного фреймворка для тестирования, но вы можете использовать простые тестовые команды и утверждения. Давайте напишем функцию и протестируем её с помощью `test` или `[ ]`.

Функция Bash для тестирования:
```Bash
is_number() {
  [[ $1 =~ ^[0-9]+$ ]] && return 0 || return 1
}
```

Тестовый случай:
```Bash
test_is_number() {
  is_number 42 && echo "Пройдено: 42 - это число" || echo "Не пройдено: 42 - это не число"
  is_number abc && echo "Пройдено: abc - это число" || echo "Не пройдено: abc - это не число"
}

test_is_number
```

Пример вывода:
```
Пройдено: 42 - это число
Не пройдено: abc - это не число
```

## Погружение

Тестирование в Bash развивалось. Изначально это была ручная проверка вывода скриптов. Затем появилась команда `test` в 1970-х годах, которая позволила скриптам самопроверять условия. Альтернативы, такие как `Bats`, настоящий фреймворк для тестирования Bash, предлагают больше возможностей, но требуют внешней установки. Сочетание `Bats` с инструментами непрерывной интеграции (CI), такими как Jenkins или GitHub Actions, приводит к более надежным тестовым процессам. При реализации помните, что Bash менее детализирован по сравнению с фреймворками для тестирования других языков; используйте `-eq` для сравнения чисел, `-z` для проверки, является ли строка нулевой, и `[[ ]]` для продвинутых функций, таких как сопоставление с образцом.

## Смотрите также

- [Bats: Bash Automated Testing System](https://github.com/bats-core/bats-core) (Автоматическая система тестирования для Bash)
- [Advanced Bash-Scripting Guide: Testing and Branching](https://tldp.org/LDP/abs/html/testbranch.html) (Руководство по продвинутому скриптованию на Bash: Тестирование и Ветвление)
- [ShellCheck: Статический анализатор скриптов shell](https://www.shellcheck.net/)
