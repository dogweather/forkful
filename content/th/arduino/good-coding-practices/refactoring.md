---
changelog:
- 2024-03-17, gpt-4-0125-preview, translated from English
date: 2024-03-17 21:50:15.887433-06:00
description: "\u0E27\u0E34\u0E18\u0E35\u0E01\u0E32\u0E23: \u0E2A\u0E21\u0E21\u0E15\
  \u0E34\u0E27\u0E48\u0E32\u0E04\u0E38\u0E13\u0E21\u0E35\u0E1F\u0E31\u0E07\u0E01\u0E4C\
  \u0E0A\u0E31\u0E19\u0E43\u0E19 Arduino \u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E17\
  \u0E35\u0E48\u0E17\u0E33\u0E07\u0E32\u0E19\u0E21\u0E32\u0E01\u0E40\u0E01\u0E34\u0E19\
  \u0E44\u0E1B \u0E40\u0E0A\u0E48\u0E19\u0E19\u0E35\u0E49."
lastmod: '2024-03-17T21:57:56.489396-06:00'
model: gpt-4-0125-preview
summary: "\u0E2A\u0E21\u0E21\u0E15\u0E34\u0E27\u0E48\u0E32\u0E04\u0E38\u0E13\u0E21\
  \u0E35\u0E1F\u0E31\u0E07\u0E01\u0E4C\u0E0A\u0E31\u0E19\u0E43\u0E19 Arduino \u0E02\
  \u0E2D\u0E07\u0E04\u0E38\u0E13\u0E17\u0E35\u0E48\u0E17\u0E33\u0E07\u0E32\u0E19\u0E21\
  \u0E32\u0E01\u0E40\u0E01\u0E34\u0E19\u0E44\u0E1B \u0E40\u0E0A\u0E48\u0E19\u0E19\u0E35\
  \u0E49."
title: "\u0E01\u0E32\u0E23\u0E1B\u0E23\u0E31\u0E1A\u0E42\u0E04\u0E23\u0E07\u0E2A\u0E23\
  \u0E49\u0E32\u0E07\u0E42\u0E04\u0E49\u0E14"
weight: 19
---

## วิธีการ:
สมมติว่าคุณมีฟังก์ชันใน Arduino ของคุณที่ทำงานมากเกินไป เช่นนี้:

```Arduino
void setup() {
  Serial.begin(9600);
}

void loop() {
  // ฟังก์ชันที่ทำงานมากเกินไป
  handleEverything();
}

void handleEverything() {
  // อ่านข้อมูลเซ็นเซอร์
  int sensorValue = analogRead(A0);
  // ประมวลผลข้อมูลเซ็นเซอร์
  sensorValue = map(sensorValue, 0, 1023, 0, 255);
  // พิมพ์ข้อมูลเซ็นเซอร์
  Serial.println(sensorValue);
  delay(500);
}
```

การรีแฟคเตอริงอาจจะดูเหมือนการแบ่ง `handleEverything()` ออกเป็นฟังก์ชันที่เล็กและมุ่งเน้นมากขึ้น:

```Arduino
void setup() {
  Serial.begin(9600);
}

void loop() {
  int sensorValue = readSensorData();
  int processedValue = processSensorData(sensorValue);
  printData(processedValue);
  delay(500);
}

int readSensorData() {
  return analogRead(A0);
}

int processSensorData(int sensorValue) {
  return map(sensorValue, 0, 1023, 0, 255);
}

void printData(int data) {
  Serial.println(data);
}
```

หลังจากรีแฟคเตอริง ฟังก์ชัน `loop()` ประกอบด้วยโค้ดที่อ่านง่ายขึ้นและแต่ละงานถูกจัดการโดยฟังก์ชันที่เฉพาะเจาะจง ทำให้โค้ดง่ายต่อการจัดการมากขึ้น

## การลงลึก
ในประวัติศาสตร์การพัฒนาซอฟต์แวร์ การรีแฟคเตอริงได้รับความนิยมพร้อมกับการเกิดขึ้นของวิธีการ Agile และ Test-Driven Development (TDD) ที่พึ่งพาการปรับปรุงโค้ดอย่างต่อเนื่องเพื่อปรับตัวให้เข้ากับความต้องการที่เปลี่ยนแปลงไป มีเครื่องมือและกลยุทธ์ต่างๆ สำหรับการรีแฟคเตอริง—เช่นเทคนิค "Extract Method" ที่เราใช้ในตัวอย่าง Arduino ของเรา สิ่งนี้มีความสำคัญเมื่อคุณกำลังย้ายจากต้นแบบที่เร็วไปสู่โครงการที่เสถียร ที่โค้ดควรอ่านได้ง่ายและจัดการได้ดี

เมื่อทำการรีแฟคเตอริง ก็สำคัญที่จะต้องมีชุดการทดสอบที่ดีเพื่อให้มั่นใจว่าการเปลี่ยนแปลงไม่ได้นำบั๊กมาด้วย ในโลกของ Arduino การทดสอบโดยอัตโนมัติอาจไม่เป็นไปอย่างราบรื่นเสมอไปเนื่องจากข้อจำกัดของฮาร์ดแวร์ แต่คุณยังสามารถใช้การทดสอบหน่วยสำหรับส่วนที่เป็นตรรกะหรือใช้ซิมูเลเตอร์

ทางเลือกอื่นๆ ที่ไม่ต้องทำด้วยตนเองรวมถึงการใช้เครื่องมือรีแฟคเตอริงที่เฉพาะเจาะจง ซึ่งช่วยในการระบุ "กลิ่น" ของโค้ดและแนะนำการเปลี่ยนแปลง อย่างไรก็ตาม เครื่องมือเหล่านี้บางครั้งอาจไม่เข้าถึงลักษณะเฉพาะของโค้ดสำหรับไมโครคอนโทรลเลอร์และอาจไม่มีให้ในสภาพแวดล้อมการพัฒนาของ Arduino

ในที่สุด การรีแฟคเตอริงเป็นศาสตร์ที่ควบคุมสมดุลระหว่างการปรับปรุงโครงสร้างภายในของโค้ดกับความเสี่ยงที่จะนำเสนอข้อบกพร่อง สิ่งนี้ต้องการให้คุณคิดเกี่ยวกับรายละเอียดการประยุกต์ใช้ เช่น การใช้หน่วยความจำและเวลาประมวลผล โดยเฉพาะอย่างยิ่งเนื่องจากธรรมชาติทรัพยากรจำกัดของไมโครคอนโทรลเลอร์

## ดูเพิ่มเติม
คุณสามารถลงลึกเกี่ยวกับการรีแฟคเตอริงได้มากขึ้นกับหนังสือเรือธงของ Martin Fowler *Refactoring: Improving the Design of Existing Code* สำหรับการดูที่ใกล้ชิดกว่าเกี่ยวกับการปฏิบัติที่เฉพาะเจาะจงของ Arduino ตรวจสอบฟอรั่มและชุมชนการพัฒนาของ Arduino:

- [Arduino Forum - Programming Questions](https://forum.arduino.cc/index.php?board=4.0)
- [Refactoring Guru](https://refactoring.guru/refactoring)

จำไว้ว่า เป้าหมายคือโค้ดที่สะอาดและเข้าใจง่ายสำหรับคุณในอนาคตและผู้อื่น จะได้ขอบคุณคุณ ขอให้คุณเก่งในการแฮ็ก และรักษาความเป็นระเบียบ!
