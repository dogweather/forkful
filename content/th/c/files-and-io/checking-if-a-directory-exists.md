---
changelog:
- 2024-03-17, gpt-4-0125-preview, translated from English
date: 2024-03-17 21:46:02.847108-06:00
description: "\u0E01\u0E32\u0E23\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E27\u0E48\
  \u0E32\u0E21\u0E35\u0E44\u0E14\u0E40\u0E23\u0E01\u0E17\u0E2D\u0E23\u0E35\u0E2D\u0E22\
  \u0E39\u0E48\u0E43\u0E19 C \u0E2B\u0E21\u0E32\u0E22\u0E16\u0E36\u0E07\u0E01\u0E32\
  \u0E23\u0E2A\u0E2D\u0E1A\u0E16\u0E32\u0E21\u0E23\u0E30\u0E1A\u0E1A\u0E44\u0E1F\u0E25\
  \u0E4C\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E27\u0E48\
  \u0E32\u0E40\u0E2A\u0E49\u0E19\u0E17\u0E32\u0E07\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\
  \u0E19\u0E14\u0E19\u0E31\u0E49\u0E19\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E44\u0E14\u0E40\
  \u0E23\u0E01\u0E17\u0E2D\u0E23\u0E35\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48\u2026"
lastmod: '2024-03-17T21:57:56.700385-06:00'
model: gpt-4-0125-preview
summary: "\u0E01\u0E32\u0E23\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E27\u0E48\
  \u0E32\u0E21\u0E35\u0E44\u0E14\u0E40\u0E23\u0E01\u0E17\u0E2D\u0E23\u0E35\u0E2D\u0E22\
  \u0E39\u0E48\u0E43\u0E19 C \u0E2B\u0E21\u0E32\u0E22\u0E16\u0E36\u0E07\u0E01\u0E32\
  \u0E23\u0E2A\u0E2D\u0E1A\u0E16\u0E32\u0E21\u0E23\u0E30\u0E1A\u0E1A\u0E44\u0E1F\u0E25\
  \u0E4C\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E27\u0E48\
  \u0E32\u0E40\u0E2A\u0E49\u0E19\u0E17\u0E32\u0E07\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\
  \u0E19\u0E14\u0E19\u0E31\u0E49\u0E19\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E44\u0E14\u0E40\
  \u0E23\u0E01\u0E17\u0E2D\u0E23\u0E35\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48 \u0E42\
  \u0E1B\u0E23\u0E41\u0E01\u0E23\u0E21\u0E40\u0E21\u0E2D\u0E23\u0E4C\u0E21\u0E31\u0E01\
  \u0E08\u0E30\u0E17\u0E33\u0E01\u0E32\u0E23\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\
  \u0E32\u0E23\u0E19\u0E35\u0E49\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E43\u0E2B\u0E49\u0E41\
  \u0E19\u0E48\u0E43\u0E08\u0E27\u0E48\u0E32\u0E01\u0E32\u0E23\u0E14\u0E33\u0E40\u0E19\
  \u0E34\u0E19\u0E07\u0E32\u0E19\u0E01\u0E31\u0E1A\u0E44\u0E1F\u0E25\u0E4C (\u0E40\
  \u0E0A\u0E48\u0E19 \u0E01\u0E32\u0E23\u0E2D\u0E48\u0E32\u0E19\u0E2B\u0E23\u0E37\u0E2D\
  \u0E40\u0E02\u0E35\u0E22\u0E19\u0E44\u0E1F\u0E25\u0E4C) \u0E19\u0E31\u0E49\u0E19\
  \u0E44\u0E14\u0E49\u0E17\u0E33\u0E01\u0E31\u0E1A\u0E40\u0E2A\u0E49\u0E19\u0E17\u0E32\
  \u0E07\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07 \u0E40\u0E1E\u0E37\
  \u0E48\u0E2D\u0E1B\u0E49\u0E2D\u0E07\u0E01\u0E31\u0E19\u0E02\u0E49\u0E2D\u0E1C\u0E34\
  \u0E14\u0E1E\u0E25\u0E32\u0E14\u0E41\u0E25\u0E30\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\
  \u0E27\u0E32\u0E21\u0E19\u0E48\u0E32\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\
  \u0E02\u0E2D\u0E07\u0E0B\u0E2D\u0E1F\u0E15\u0E4C\u0E41\u0E27\u0E23\u0E4C."
title: "\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E27\u0E48\u0E32\u0E21\u0E35\u0E44\
  \u0E14\u0E40\u0E23\u0E47\u0E01\u0E17\u0E2D\u0E23\u0E35\u0E2B\u0E23\u0E37\u0E2D\u0E44\
  \u0E21\u0E48"
weight: 20
---

## อะไรและทำไม?

การตรวจสอบว่ามีไดเรกทอรีอยู่ใน C หมายถึงการสอบถามระบบไฟล์เพื่อยืนยันว่าเส้นทางที่กำหนดนั้นไปยังไดเรกทอรีหรือไม่ โปรแกรมเมอร์มักจะทำการดำเนินการนี้เพื่อให้แน่ใจว่าการดำเนินงานกับไฟล์ (เช่น การอ่านหรือเขียนไฟล์) นั้นได้ทำกับเส้นทางที่ถูกต้อง เพื่อป้องกันข้อผิดพลาดและเพิ่มความน่าเชื่อถือของซอฟต์แวร์

## วิธีทำ:

ใน C, สามารถตรวจสอบการมีอยู่ของไดเรกทอรีได้โดยใช้ฟังก์ชัน `stat` ซึ่งดึงข้อมูลเกี่ยวกับไฟล์หรือไดเรกทอรีที่เส้นทางที่ระบุไว้ จากนั้นจะใช้ macro `S_ISDIR` จาก `sys/stat.h` เพื่อประเมินว่าข้อมูลที่ดึงมานั้นตรงกับไดเรกทอรีหรือไม่

นี่คือวิธีที่คุณสามารถใช้ `stat` และ `S_ISDIR` เพื่อตรวจสอบว่ามีไดเรกทอรีอยู่หรือไม่:

```c
#include <stdio.h>
#include <sys/stat.h>

int main() {
    struct stat stats;
    
    // เส้นทางของไดเรกทอรีที่ต้องการตรวจสอบ
    char *dirPath = "/path/to/directory";

    // รับสถานะของเส้นทาง
    int result = stat(dirPath, &stats);

    // ตรวจสอบว่ามีไดเรกทอรีอยู่หรือไม่
    if (result == 0 && S_ISDIR(stats.st_mode)) {
        printf("ไดเรกทอรีมีอยู่.\n");
    } else {
        printf("ไดเรกทอรีไม่มีอยู่.\n");
    }

    return 0;
}
```

ผลลัพธ์ตัวอย่าง:
```
ไดเรกทอรีมีอยู่.
```

หรือถ้าไม่มีไดเรกทอรี:
```
ไดเรกทอรีไม่มีอยู่.
```

## การทำความเข้าใจลึกซึ้ง:

โครงสร้างและฟังก์ชัน `stat` ได้เป็นส่วนหนึ่งของภาษาโปรแกรม C มาหลายทศวรรษแล้ว มีที่มาจาก Unix มอบวิธีการมาตรฐานในการดึงข้อมูลระบบไฟล์ ซึ่งแม้ว่าจะอยู่ในระดับที่ค่อนข้างต่ำ แต่ก็ยังถูกใช้กันอย่างแพร่หลายเนื่องจากความเรียบง่ายและเข้าถึงข้อมูลเมตาของระบบไฟล์ได้อย่างตรงไปตรงมา

ในอดีต การตรวจสอบการมีอยู่และคุณสมบัติของไฟล์และไดเรกทอรีด้วย `stat` และฟังก์ชันลูกหลานอื่น ๆ (เช่น `fstat` และ `lstat`) เป็นวิธีการทั่วไป อย่างไรก็ตาม ฟังก์ชันเหล่านี้มีการโต้ตอบโดยตรงกับเคอร์เนลของระบบปฏิบัติการ ซึ่งอาจนำมาซึ่งภาระและข้อผิดพลาดที่อาจเกิดขึ้นหากไม่ได้จัดการอย่างถูกต้อง

สำหรับโปรเจคใหม่ ๆ หรือเมื่อทำงานในสถานการณ์ระดับสูง โปรแกรมเมอร์อาจเลือกใช้กลไกการจัดการไฟล์แบบที่มีการสรุปมากขึ้นที่มีให้โดย frameworks หรือห้องสมุดสมัยใหม่ที่จัดการข้อผิดพลาดได้ดีขึ้นและมี API ที่ง่ายกว่า อย่างไรก็ตาม การเข้าใจและสามารถใช้ `stat` ยังคงเป็นทักษะที่มีค่าสำหรับสถานการณ์ที่ต้องการการควบคุมระบบไฟล์โดยตรง เช่น การโปรแกรมระบบหรือเมื่อทำงานในสภาพแวดล้อมที่มีข้อจำกัดซึ่งไม่เหมาะกับการพึ่งพาห้องสมุดขนาดใหญ่
