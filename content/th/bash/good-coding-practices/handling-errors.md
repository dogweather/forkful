---
changelog:
- 2024-03-17, gpt-4-0125-preview, translated from English
date: 2024-03-17 21:48:11.680966-06:00
description: "\u0E01\u0E32\u0E23\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E02\u0E49\u0E2D\
  \u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E43\u0E19 Bash scripting \u0E2B\u0E21\
  \u0E32\u0E22\u0E16\u0E36\u0E07\u0E01\u0E32\u0E23\u0E04\u0E32\u0E14\u0E01\u0E32\u0E23\
  \u0E13\u0E4C\u0E2A\u0E16\u0E32\u0E19\u0E17\u0E35\u0E48\u0E17\u0E35\u0E48\u0E2D\u0E32\
  \u0E08\u0E21\u0E35\u0E1B\u0E31\u0E0D\u0E2B\u0E32\u0E41\u0E25\u0E30\u0E08\u0E31\u0E14\
  \u0E01\u0E32\u0E23\u0E01\u0E31\u0E1A\u0E21\u0E31\u0E19\u0E2D\u0E22\u0E48\u0E32\u0E07\
  \u0E21\u0E35\u0E21\u0E32\u0E23\u0E22\u0E32\u0E17 \u0E17\u0E33\u0E44\u0E21?\u2026"
lastmod: '2024-03-17T21:57:56.404667-06:00'
model: gpt-4-0125-preview
summary: "\u0E01\u0E32\u0E23\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E02\u0E49\u0E2D\
  \u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E43\u0E19 Bash scripting \u0E2B\u0E21\
  \u0E32\u0E22\u0E16\u0E36\u0E07\u0E01\u0E32\u0E23\u0E04\u0E32\u0E14\u0E01\u0E32\u0E23\
  \u0E13\u0E4C\u0E2A\u0E16\u0E32\u0E19\u0E17\u0E35\u0E48\u0E17\u0E35\u0E48\u0E2D\u0E32\
  \u0E08\u0E21\u0E35\u0E1B\u0E31\u0E0D\u0E2B\u0E32\u0E41\u0E25\u0E30\u0E08\u0E31\u0E14\
  \u0E01\u0E32\u0E23\u0E01\u0E31\u0E1A\u0E21\u0E31\u0E19\u0E2D\u0E22\u0E48\u0E32\u0E07\
  \u0E21\u0E35\u0E21\u0E32\u0E23\u0E22\u0E32\u0E17 \u0E17\u0E33\u0E44\u0E21."
title: "\u0E01\u0E32\u0E23\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E01\u0E31\u0E1A\u0E02\
  \u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14"
weight: 16
---

## อะไร & ทำไม?

การจัดการข้อผิดพลาดใน Bash scripting หมายถึงการคาดการณ์สถานที่ที่อาจมีปัญหาและจัดการกับมันอย่างมีมารยาท ทำไม? เพราะว่าช่วยให้สคริปต์ของคุณมีความแข็งแรงและป้องกันผู้ใช้จากความสับสนเมื่อสิ่งต่างๆไม่ได้ผลลัพธ์ตามที่คาดหมาย

## วิธีการ:

```Bash
#!/bin/bash

# การเปลี่ยนทาง stderr ไปยังไฟล์
grep "something" file.txt 2> errors.log

# การจัดการข้อผิดพลาดด้วยสถานะการออก
if ! grep "something" file.txt; then
    echo "อุ๊ย, มีบางอย่างผิดพลาดในการค้นหา 'something'."
    exit 1
fi

# ใช้ trap เพื่อทำความสะอาดก่อนออกจากการเกิดข้อผิดพลาด
cleanup() {
  echo "กำลังทำความสะอาดไฟล์ชั่วคราว..."
  rm temp_*
}

trap cleanup ERR

# ข้อผิดพลาดจงใจ: ไฟล์ไม่มีอยู่
cat temp_file.txt
```

ผลลัพธ์ตัวอย่างเมื่อเกิดข้อผิดพลาด:

```
กำลังทำความสะอาดไฟล์ชั่วคราว...
cat: temp_file.txt: ไม่มีไฟล์หรือไดเรกทอรีนี้
```

## การศึกษาลึก

การจัดการข้อผิดพลาดใน Bash scripting เริ่มต้นมาตั้งแต่การสร้าง Unix shell ซึ่งสคริปต์ที่แข็งแกร่งและเชื่อถือได้คือสิ่งสำคัญสำหรับงานดูแลระบบและอัตโนมัติ โดยทั่วไป ข้อผิดพลาดใน Bash จะถูกจัดการโดยการตรวจสอบสถานะการออกของคำสั่ง ซึ่งโดยปกติจะคืนค่า 0 สำหรับความสำเร็จและค่าที่ไม่ใช่ศูนย์สำหรับความล้มเหลว

Bash ได้นำเสนอคำสั่ง `trap` ในฐานะคำสั่งภายใน ช่วยให้ผู้ใช้กำหนดคำสั่งที่จะทำงานตามสัญญาณหรือการออกจากสคริปต์ นี่เป็นประโยชน์สำหรับงานทำความสะอาดหรือเป็นจุดสุดท้ายในการจัดการข้อผิดพลาด

ยังมีคำสั่ง `set` อีกด้วย ซึ่งสามารถเปลี่ยนพฤติกรรมของ Bash เมื่อพบข้อผิดพลาด ตัวอย่างเช่น, `set -e` จะทำให้สคริปต์ออกทันทีถ้ามีคำสั่งใดคำสั่งหนึ่งออกด้วยสถานะที่ไม่ใช่ศูนย์ ซึ่งเป็นวิธีการหยุดเร็วและป้องกันข้อผิดพลาดที่ตามมา

ความเลือกอื่นๆ กับการจัดการข้อผิดพลาดของ Bash ภายในรวมถึงการตรวจสอบอย่างชัดแจ้งสำหรับการมีอยู่ของไฟล์, การใช้การแทนที่คำสั่ง, หรือแม้แต่การเขียนฟังก์ชันของคุณเองเพื่อจัดการข้อผิดพลาดอย่างมีรายละเอียด

แม้ว่าการจัดการข้อผิดพลาดอย่างเข้มงวดบางครั้งอาจดูเกินจริงสำหรับสคริปต์ขนาดเล็ก แต่เป็นปฏิบัติการที่สามารถประหยัดเวลาในการตรวจสอบข้อผิดพลาดและป้องกันพฤติกรรมที่ไม่คาดคิดสำหรับทั้งคุณและผู้ใช้

## ดูเพิ่มเติม

- คู่มือ Bash เกี่ยวกับพารามิเตอร์ของ Shell: https://www.gnu.org/software/bash/manual/bash.html#Shell-Parameters
- ส่วนของคู่มือ Bash-Scripting ขั้นสูงเกี่ยวกับการจัดการข้อผิดพลาด: https://www.tldp.org/LDP/abs/html/exit-status.html
- คู่มือลึกซึ้งเกี่ยวกับ `trap`: https://mywiki.wooledge.org/SignalTrap

จำไว้ว่า, การเขียนสคริปต์เป็นรูปแบบของศิลปะ, และวิธีการที่คุณจัดการกับความผิดพลาดสามารถทำให้ผลงานชิ้นเอกของคุณมีความแข็งแกร่งมากขึ้น สคริปต์อย่างมีความสุข!
