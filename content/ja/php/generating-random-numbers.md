---
title:                "乱数の生成"
date:                  2024-01-27T20:34:40.108159-07:00
model:                 gpt-4-0125-preview
simple_title:         "乱数の生成"

category:             "PHP"
tag:                  "Numbers"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ja/php/generating-random-numbers.md"
---

{{< edit_this_page >}}

## 何となぜ？

PHPで乱数を生成することは、指定された範囲内で予測不可能な値を生成することについてであり、これは一意のユーザーIDの作成、パスワードの生成、シミュレーションやゲームでの使用などのタスクに不可欠です。プログラマーは、テストやユーザー体験をより堅牢で魅力的にするために、アプリケーションに予測不可能性と変動性を加えるためにランダム性に依存しています。

## 方法：

PHPは乱数を生成するためのいくつかの関数を提供していますが、最も一般的に使用されるのは`rand()`、`mt_rand()`、そして暗号化目的での`random_int()`です。

0からgetrandmax()（`rand()`によって返される可能性のある最大値）の間のシンプルな乱数を生成するには、次のコードを使います：

```PHP
echo rand();
```

より特定の範囲、たとえば1から100の間で生成するには：

```PHP
echo rand(1, 100);
```

しかし、速度とランダム性の観点から`mt_rand()`を使用することがより良い選択です：

```PHP
echo mt_rand(1, 100);
```

出力はランダマイゼーションに依存して1から100の間の任意の数、例えば`42`になります。

暗号化またはセキュリティの文脈では、予測不可能性が重要である場合、システムの乱数生成器からランダムバイトを使用して暗号学的に安全な疑似乱数整数を生成する`random_int()`が推奨されます：

```PHP
echo random_int(1, 100);
```

再び、出力は1から100の間のランダムな数、例えば`84`になりますが、ランダム性の強い保証があります。

## 深掘り

`rand()`関数はPHPの初期バージョンから存在しており、乱数を生成するための初期的なアプローチとして機能してきました。しかし、比較的予測可能なアルゴリズムのため、高度なランダム性が求められるアプリケーションには最良の選択ではありません。

PHP 4で導入された`mt_rand()`は、Mersenne Twisterアルゴリズムに基づいており、「rand()`と比べて生成できる速度と乱数の観点からはるかに優れています。それはすぐに非暗号化ニーズのための好ましいオプションとなりました。

セキュリティに敏感なアプリケーションのために、PHP 7では、システムの乱数生成器からのランダムバイトを使用して暗号学的に安全な疑似乱数整数を生成する`random_int()`が導入されました。これは、`rand()`や`mt_rand()`よりもはるかに安全であり、予測可能性がセキュリティの脆弱性につながる可能性のあるトークン、キー、またはその他の要素の生成に最適な選択です。

これらの改善にもかかわらず、アプリケーションのコンテキストに基づいて適切な関数を選択することが重要です。一般的な用途には`mt_rand()`が十分ですが、対象とされたり、悪用される可能性があるものには、ランダム性とセキュリティの両方を提供する`random_int()`が行くべき道です。
