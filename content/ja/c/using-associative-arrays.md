---
title:                "連想配列の使用"
date:                  2024-01-30T19:10:15.660830-07:00
model:                 gpt-4-0125-preview
simple_title:         "連想配列の使用"

category:             "C"
tag:                  "Data Structures"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ja/c/using-associative-arrays.md"
changelog:
  - 2024-01-30, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## 何となぜ？

連想配列またはハッシュマップは、キーを使ってデータを格納・取得できるキーと値のペアです。大量のデータを扱うとき、特にリストと比較してデータへのアクセスが早くなるため、C言語で非常に便利です。

## どのようにして：

C言語には他の言語のような連想配列の組み込みサポートはありませんが、構造体といくつかのライブラリ関数を使用して類似の機能を実現できます。ここでは`uthash`ライブラリを使用した簡単な実装を紹介します。このライブラリはプロジェクトに含める必要があります。

まず、キーと値のペアを保存するための構造体を定義します：

```C
#include <stdio.h>
#include "uthash.h"

typedef struct {
    int id; // これが私たちのキーになります
    char name[10]; // これがキーに関連付けられた値です
    UT_hash_handle hh; // この構造体をハッシュ可能にします
} person;
```

次に、いくつかのエントリを追加して取得してみましょう：

```C
int main() {
    person *my_people = NULL, *s;

    // エントリの追加
    s = (person*)malloc(sizeof(person));
    s->id = 1;
    strcpy(s->name, "Alice");
    HASH_ADD_INT(my_people, id, s);

    // エントリの取得
    int user_id = 1;
    HASH_FIND_INT(my_people, &user_id, s);
    if (s) {
        printf("Found: %s\n", s->name);
    }
    
    return 0;
}
```

サンプル出力は以下の通りです：

```
Found: Alice
```

作業が終わったら、メモリリークを避けるために割り当てられたメモリを解放し、ハッシュテーブルを解除しないことを忘れないでください。

## 深く掘り下げて

連想配列はC言語にはネイティブではありませんが、`uthash`のようなライブラリはこの機能を使用する比較的簡単な方法をかなりうまく提供しています。歴史的に、C言語の開発者たちはこれらのデータ構造のバージョンを自分たちで実装する必要があり、特に言語を始めたばかりの人にとっては、さまざまでしばしば複雑な実装につながりました。

連想配列をC言語で使用する効率は、ハッシュ関数がテーブル全体に値をどの程度うまく分散させて衝突を最小限に抑えるかに大きく依存します。`uthash`のようなライブラリは使いやすさと性能のバランスが良いものの、パフォーマンスが最優先の重要なアプリケーションでは、独自のハッシュテーブルを調整または実装することを検討するかもしれません。

最大限の効率を求めるアプリケーションでは、代替のデータ構造や連想配列を組み込みサポートしている他のプログラミング言語がより適している場合もあります。しかし、多くの状況、特に既にC環境内で作業している場合には、`uthash`のようなライブラリを使用することで性能と便利さの実用的なバランスを提供します。
