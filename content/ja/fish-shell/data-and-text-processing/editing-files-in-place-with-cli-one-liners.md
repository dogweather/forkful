---
date: 2024-01-27 16:20:59.214435-07:00
description: "CLI \u30EF\u30F3\u30E9\u30A4\u30CA\u30FC\u3092\u4F7F\u7528\u3057\u305F\
  \u30D5\u30A1\u30A4\u30EB\u306E\u305D\u306E\u5834\u3067\u306E\u7DE8\u96C6\u306F\u3001\
  \u30C6\u30AD\u30B9\u30C8\u30A8\u30C7\u30A3\u30BF\u3067\u30D5\u30A1\u30A4\u30EB\u3092\
  \u958B\u304F\u3053\u3068\u306A\u304F\u3001\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\
  \u304B\u3089\u76F4\u63A5\u30D5\u30A1\u30A4\u30EB\u306B\u5909\u66F4\u3092\u52A0\u3048\
  \u308B\u3053\u3068\u306B\u95A2\u3059\u308B\u3082\u306E\u3067\u3059\u3002\u30D7\u30ED\
  \u30B0\u30E9\u30DE\u30FC\u306F\u3001\u6642\u9593\u3092\u7BC0\u7D04\u3057\u3001\u7E70\
  \u308A\u8FD4\u3057\u7DE8\u96C6\u4F5C\u696D\u3092\u81EA\u52D5\u5316\u3059\u308B\u305F\
  \u3081\u306B\u3053\u308C\u3092\u884C\u3044\u307E\u3059\u3002\u3053\u308C\u306B\u3088\
  \u308A\u3001\u30EF\u30FC\u30AF\u30D5\u30ED\u30FC\u304C\u3088\u308A\u30B9\u30E0\u30FC\
  \u30BA\u3067\u52B9\u7387\u7684\u306B\u306A\u308A\u307E\u3059\u3002"
lastmod: 2024-02-19 22:05:01.839227
model: gpt-4-0125-preview
summary: "CLI \u30EF\u30F3\u30E9\u30A4\u30CA\u30FC\u3092\u4F7F\u7528\u3057\u305F\u30D5\
  \u30A1\u30A4\u30EB\u306E\u305D\u306E\u5834\u3067\u306E\u7DE8\u96C6\u306F\u3001\u30C6\
  \u30AD\u30B9\u30C8\u30A8\u30C7\u30A3\u30BF\u3067\u30D5\u30A1\u30A4\u30EB\u3092\u958B\
  \u304F\u3053\u3068\u306A\u304F\u3001\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u304B\
  \u3089\u76F4\u63A5\u30D5\u30A1\u30A4\u30EB\u306B\u5909\u66F4\u3092\u52A0\u3048\u308B\
  \u3053\u3068\u306B\u95A2\u3059\u308B\u3082\u306E\u3067\u3059\u3002\u30D7\u30ED\u30B0\
  \u30E9\u30DE\u30FC\u306F\u3001\u6642\u9593\u3092\u7BC0\u7D04\u3057\u3001\u7E70\u308A\
  \u8FD4\u3057\u7DE8\u96C6\u4F5C\u696D\u3092\u81EA\u52D5\u5316\u3059\u308B\u305F\u3081\
  \u306B\u3053\u308C\u3092\u884C\u3044\u307E\u3059\u3002\u3053\u308C\u306B\u3088\u308A\
  \u3001\u30EF\u30FC\u30AF\u30D5\u30ED\u30FC\u304C\u3088\u308A\u30B9\u30E0\u30FC\u30BA\
  \u3067\u52B9\u7387\u7684\u306B\u306A\u308A\u307E\u3059\u3002"
title: "CLI\u30EF\u30F3\u30E9\u30A4\u30CA\u30FC\u3067\u306E\u30D5\u30A1\u30A4\u30EB\
  \u306E\u30A4\u30F3\u30D7\u30EC\u30FC\u30B9\u7DE8\u96C6"
---

{{< edit_this_page >}}

## 何となぜ？

CLI ワンライナーを使用したファイルのその場での編集は、テキストエディタでファイルを開くことなく、コマンドラインから直接ファイルに変更を加えることに関するものです。プログラマーは、時間を節約し、繰り返し編集作業を自動化するためにこれを行います。これにより、ワークフローがよりスムーズで効率的になります。

## 方法：

ユーザーフレンドリーな機能と強力なスクリプティング機能で知られる Fish Shell は、その場でファイルを編集するいくつかの方法を提供しています。ただし、他のシェルとは異なり、Fish にはその場での編集のための組み込みメカニズムはありません（例えば Bash の `sed -i` ）。しかし心配無用、少しの創造性と `sed` や `awk` などの外部ツールの助けを借りて、これを実現することができます。

### `sed` を使用した単純な置換
`file.txt` の "hello" を全て "world" に置換するには、以下を使用します：
```Fish Shell
sed -i '' 's/hello/world/g' file.txt
```

### 複数の `sed` コマンドを適用する
複数の置換を行う必要がある場合、それらをこのように連鎖させることができます：
```Fish Shell
sed -i '' -e 's/fish/bass/g' -e 's/rainbow/trout/g' file.txt
```

### より複雑な操作に `awk` を使用する
`sed` では複雑すぎる操作には、`awk` がおすすめのツールかもしれません。ここでは、各行の数字を倍にする方法を示します：
```Fish Shell
awk '{print $1 * 2}' file.txt > temp && mv temp file.txt
```

### エラーハンドリングについての注意
これらのツールを Fish から使用する際には、エラーのキャプチャとそのメッセージを理解することが重要です。Fish の堅牢なエラーハンドリングを使用して、スクリプトをより信頼性の高いものにしてください。

## 深堀り

歴史的に、その場でのファイル編集は Unix および Linux プログラミングの基本であり、手動でファイルを開くことなく迅速に編集を行う効率的な方法を提供しています。`sed` や `awk` などのツールは Unix の初期から存在し、テキスト処理タスクに欠かせないユーティリティとなっています。

Fish Shell は、より現代的で使用性とスクリプティングの改善を誇っていますが、対話性とユーザーフレンドリーに焦点を当てた設計思想のために、組み込みのその場での編集機能を欠いています。Fish にその場での編集コマンドがネイティブに存在しないことは、Unix系エコシステム内の外部ツールの重要性を強調しています。

Fish でその場での編集の代替手段には、一時ファイルを使用するか、Perl や Python のワンライナーを活用する方法があり、これらは複雑なタスクに対してより多くの柔軟性や可読性を提供することができます。

たとえば、Perl を使用する場合：
```Fish Shell
perl -pi -e 's/find/replace/g' file.txt
```
または Python を使用する場合：
```Fish Shell
python -c "import re, sys; [sys.stdout.write(re.sub('pattern', 'replacement', line)) for line in sys.stdin]" < file.txt > temp && mv temp file.txt
```

実装において、その場での編集を行う際、これらのツールは典型的には一時ファイルを作成し、変更されたバージョンで元のファイルを置き換える前にそこに変更を書き込みます。このアプローチは、操作中にエラーが発生した場合、ファイル編集プロセスがデータを損なうことや失うことがないように保証します。

これらのツールと方法を理解することにより、Fish Shell プログラマーは効果的にその場での編集をスクリプトに組み込むことができ、Fish のユーザーフレンドリーな機能と伝統的な Unix テキスト処理ユーティリティの生の力の間のギャップを埋めることができます。
